<div class="train">
  <h2>投稿一覧</h2>
  <%= flash[:notice] %>
  <div class="container">
    <%= form_with model: @post, url: members_sort_path, method: :get, local: true do |f| %>
      <%= f.select :keyword, [['投稿が新しい順', 'new'],['投稿が古い順', 'old'],['いいねが多い順', 'likes'],['いいねが少ない順', 'dislikes'],] %>
      <%= f.submit %>
    <% end %>
    <div class="row row-cols-1 row-cols-md-3 g-4">
      <% @posts.each do |post| %>
        <div class="col">
          <div class="card">
            <%= link_to post_path(post.id) do %>
              <%= image_tag post.get_post_image, width: "100%", height: "50%"  %>
            <% end %>
            <%= post.location %><br>
            <%= post.detail %><br>
            <%= link_to tag_posts_path(tag_id: post.id) do %>
              <%= post.tags.map(&:name).join(',') %>
            <% end %>
            <div id="like_btn_<%= post.id %>">
              <%= render 'public/likes/like', post: post %>
            </div>
            <div class="comment">
              <%= "#{post.comments.count} コメント" %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
    <div class="col-3">
      <% @tag_list.each do |list| %>
        <%= link_to list.name, tag_posts_path(tag_id: list.id) %>
        <%= "(#{list.posts.count})" %>
      <% end %>
    </div>
  </div>
</div>
